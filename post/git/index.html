<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<title>为什么 Git 与众不同 | ChuckLin's Blog</title>
<meta name=description content="Love and Peace">
<meta name=author content>
<link rel=apple-touch-icon sizes=180x180 href=https://www.chucklin.net/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://www.chucklin.net/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://www.chucklin.net/favicon-16x16.png>
<link rel=manifest href=https://www.chucklin.net/site.webmanifest>
<link rel=mask-icon href=https://www.chucklin.net/safari-pinned-tab.svg color=#00416a>
<meta name=msapplication-TileColor content="#00aba9">
<meta name=theme-color content="#ffffff">
<link rel=me href=mailto:mikumiku.lch@hotmail.com>
<link rel=me href=https://github.com/chuck1in>
<link rel=authorization_endpoint href=https://indieauth.com/auth>
<link rel=token_endpoint href=https://tokens.indieauth.com/token>
<link rel=stylesheet href=https://www.chucklin.net/css/fonts.css>
<link rel=stylesheet href=https://www.chucklin.net/css/style.css>
<link rel=stylesheet href=https://www.chucklin.net/css/custom.css>
<meta name=viewport content="width=device-width,initial-scale=1">
</head>
<body>
<div id=sitelogo>
<a class=glyph alt=Home href=https://www.chucklin.net/><img src=https://www.chucklin.net/images/site-logo.svg alt="Site Logo" height=64px width=64px></a>
</div>
<header>
<nav>
<div id=page-nav>
<div class=page-nav-item>
<a href=https://www.chucklin.net/>Home</a>
</div>
<div class=page-nav-item>
<a href=/about/me>
<span>About</span>
</a>
</div>
<div class=page-nav-item>
<a href=/tags>
<span>Tag</span>
</a>
</div>
</div>
</nav>
</header>
<div id=content>
<article class=h-entry>
<header>
<h1 class="post-title p-name">为什么 Git 与众不同</h1>
<p class=post-date>Posted on
<time class=dt-published datetime=2019-06-01T09:23:00+08:00>
1 June, 2019 at 09:23 +0800
</time> by <a href=https://www.chucklin.net/ class="p-author h-card" rel=author>Chuck Lin</a>
</p>
</header>
<section class="content e-content">
<h2 id=关于版本控制系统>关于版本控制系统</h2>
<blockquote>
<p>按照时间顺序记录某一系列的文件的变更，使其可以查看以前的特定版本的软件，我们称之为版本控制系统。</p>
</blockquote>
<p>简单来讲：创建两个文件夹，在两个文件夹中分别保存一月份与二月份的销售数据，这样就创建了一个简单且稳定的版本控制系统。</p>
<h2 id=常见的版本控制系统>常见的版本控制系统</h2>
<ul>
<li>
<p>RCS
在 MacOS 上，只要你安装了开发者工具，就会包含一个 rcs 命令。RCS 会在磁盘上以一种特殊的格式保存补丁集。当你需要某个版本的内容时，我们通过叠加补丁集，来恢复到某个历史的状态。</p>
</li>
<li>
<p>Subversion
和 RCS 类似，Subversion 在中央服务器上保存了每个版本的 patch set。当用户进行检出时，我们检出的实际上是检出版本对应的补丁集数据。显而易见：如果中央服务器发生异常，将导致检出与提交功能无法使用，继而造成版本控制系统的瘫痪。
<img src=http://static.zybuluo.com/mikumikulch/2xrryaxeign3sgc7bpfoaemh/image_1chq621f670k16341mlg11vq1cm9.png alt=image_1chq621f670k16341mlg11vq1cm9.png-76.7kB></p>
</li>
</ul>
<h2 id=为什么-git-与众不同>为什么 Git 与众不同？</h2>
<h3 id=其他版本控制系统的文件存储设计>其他版本控制系统的文件存储设计</h3>
<p>Git 与上述版本控制系统最大的不同在于其对待数据的方式。概念上来区分，其它大部分系统以文件变更列表的方式存储信息。 这类系统（CVS、Subversion、Perforce、Bazaar 等等）将它们保存的信息看作是一组基本文件和每个文件随时间逐步累积的差异。</p>
<ul>
<li>Version1 保存了 3 个文件 A、B、C。</li>
<li>Version2 File A 与 File C 发生了变化，版本控制系统将变化的补丁集保存下来。File B 未发生任何变化。</li>
</ul>
<p>如下图所示：当需要恢复到某个历史版本时，需要从中央服务器上拉去补丁集，并叠加恢复到某一时间段的状态。</p>
<p><img src=http://static.zybuluo.com/mikumikulch/quu8nyfmm9jm4lfswnubdrtu/image_1chq6i57hc9vu66n8e1s9t1dhsm.png alt=image_1chq6i57hc9vu66n8e1s9t1dhsm.png-57.5kB></p>
<h3 id=git-版本控制系统的文件存储设计>Git 版本控制系统的文件存储设计</h3>
<p>Git 不按照以上方式对待或保存数据。 反之，Git 更像是把数据看作是对小型文件系统的一组快照。 每次你提交更新，或在 Git 中保存项目状态时，它主要对当时的全部文件制作一个快照并保存这个快照的索引。 为了高效，如果文件没有修改，Git 不再重新存储该文件，而是只保留一个链接指向之前存储的文件。 Git 对待数据更像是一个<strong>快照流</strong>。</p>
<ul>
<li>Version1 保存了 3 个名称为 A、B、C 的文件。</li>
<li>Version2 文件 A、C 发生了变化，版本保存了变化后的文件。文件 B 没有发生任何变化，版本保留了一个指向 File B 的链接。</li>
</ul>
<p>由于 Git 的快照同步机制，只需要同步一次服务器上的版本数据信息，即可在本地恢复到任何一个版本。另外，无论哪一台客户机的数据发生了丢失，都可以随时同步其他客户机的数据恢复作业，这就是<strong>分布式</strong>的含义。从本质上来说，Git 不再是一种一个单纯的版本控制系统，而更像是一个微型文件系统。</p>
<p><img src=http://static.zybuluo.com/mikumikulch/lpanpn8zhg3qxd9i4jtyfzzk/image_1chs2vjah1ul613llmp91270ru213.png alt=image_1chs2vjah1ul613llmp91270ru213.png-74.1kB></p>
<h5 id=git-的完整性校验>Git 的完整性校验</h5>
<p>在计算机中，哈希算法经常用来做签名校验，以保证内容的完整性，Git 也一样。
在 Git 中所有数据在存储前都计算校验和，然后以校验和来引用。Git 用来计算校验和的机制叫做 SHA-1 散列（hash，哈希）。 基于 Git 中文件的内容或目录结构计算出来。 SHA-1 哈希看起来是这样</p>
<pre tabindex=0><code>24b9da6552252987aa493b52f8696cd6d3b00373
</code></pre><p>Git 数据库中保存的信息都是以文件内容的哈希值来索引，而不是文件名。</p>
<h2 id=结语>结语</h2>
<p>简单总结一下本章的内容：</p>
<ul>
<li>传统的版本控制系统，保存的是文件变化的补丁集。</li>
<li>分布式文件系统 Git 保存的是文件的快照流，不是变化的补丁集。</li>
<li>Git 使用 hash 算法来对文件进行引用。</li>
</ul>
<hr>
<p>参考书籍
《精通 Git pro 第二版》</p>
</section>
<footer>
<a class="permalink u-url" href=https://www.chucklin.net/post/git/>🔗</a>
<hr class=post-underline>
<p class=post-tag>Tags for this post:
<a href=https://www.chucklin.net/tags/java class="post-tag p-category">java</a>
</p>
</footer>
</article>
</div>
<div class=h-card>
<img class=u-photo src=https://www.chucklin.net/images/avator.jpg>
<div class=card-content>
<h2 class=card-name><a class="p-name u-url" href=https://www.chucklin.net/ rel=me>Chuck Lin</a></h2>
<p class=card-subhead>
<span class=p-locality>Chengdu</span>,
<span class=p-country-name>China</span><br>
<a class=u-email href=mailto:mikumiku.lch@hotmail.com>Email me</a>
</p>
</div>
<p class=p-note>从事开发工作10年，持续写作4年，现在的身份是一名 freelancer。项目外包、雇佣洽谈等事项请通过邮箱和我联系。</p>
</div>
<div id=footer>
<nav id=article-skip>
<div class=next>
<a alt="Newer article" href=https://www.chucklin.net/post/softskill/>&larr; Newer</a>
</div>
<div class=top>
<a alt="Top of page" href=#>Top</a>
</div>
<div class=prev>
<a alt="Older article" href=https://www.chucklin.net/post/sign_designmode/>Older &rarr;</a>
</div>
</nav>
<aside id=social>
<div id=social-icons>
<div class=icon-24x24>
<a class=glyph alt="GitHub profile" href=https://github.com/chuck1in><img src=https://www.chucklin.net/icons/github.svg height=24px width=24px></a>
</div>
</div>
</aside>
<p class=copyright>
Copyright © 2021 Chuck Lin. All rights reserved.
</p>
</div>
</body>
</html>