<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<title>ä»€ä¹ˆæ˜¯ä¼˜ç§€çš„æµ‹è¯•ï¼Ÿ | ChuckLin's Blog</title>
<meta name=description content="Love and Peace">
<meta name=author content>
<link rel=apple-touch-icon sizes=180x180 href=https://www.chucklin.net/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://www.chucklin.net/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://www.chucklin.net/favicon-16x16.png>
<link rel=manifest href=https://www.chucklin.net/site.webmanifest>
<link rel=mask-icon href=https://www.chucklin.net/safari-pinned-tab.svg color=#00416a>
<meta name=msapplication-TileColor content="#00aba9">
<meta name=theme-color content="#ffffff">
<link rel=me href=mailto:mikumiku.lch@hotmail.com>
<link rel=me href=https://github.com/chuck1in>
<link rel=authorization_endpoint href=https://indieauth.com/auth>
<link rel=token_endpoint href=https://tokens.indieauth.com/token>
<link rel=stylesheet href=https://www.chucklin.net/css/fonts.css>
<link rel=stylesheet href=https://www.chucklin.net/css/style.css>
<link rel=stylesheet href=https://www.chucklin.net/css/custom.css>
<meta name=viewport content="width=device-width,initial-scale=1">
</head>
<body>
<div id=sitelogo>
<a class=glyph alt=Home href=https://www.chucklin.net/><img src=https://www.chucklin.net/images/site-logo.svg alt="Site Logo" height=64px width=64px></a>
</div>
<header>
<nav>
<div id=page-nav>
<div class=page-nav-item>
<a href=https://www.chucklin.net/>Home</a>
</div>
<div class=page-nav-item>
<a href=/about/me>
<span>About</span>
</a>
</div>
<div class=page-nav-item>
<a href=/tags>
<span>Tag</span>
</a>
</div>
</div>
</nav>
</header>
<div id=content>
<article class=h-entry>
<header>
<h1 class="post-title p-name">ä»€ä¹ˆæ˜¯ä¼˜ç§€çš„æµ‹è¯•ï¼Ÿ </h1>
<p class=post-date>Posted on
<time class=dt-published datetime=2020-01-29T09:51:00+08:00>
29 January, 2020 at 09:51 +0800
</time> by <a href=https://www.chucklin.net/ class="p-author h-card" rel=author>Chuck Lin</a>
</p>
</header>
<section class="content e-content">
<h2 id=å•å…ƒæµ‹è¯•çš„è´¨é‡æ„ä¹‰>å•å…ƒæµ‹è¯•çš„è´¨é‡æ„ä¹‰</h2>
<p>åˆç†ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œå¯ä½¿å›¢é˜Ÿå·¥ç¨‹å¸ˆå‘Šåˆ«ç‰›ä»”å¼ç¼–ç¨‹ï¼Œäº§å‡ºæ˜“ç»´æŠ¤çš„é«˜è´¨é‡ä»£ç ã€‚éšç€å•å…ƒæµ‹è¯•è¦†ç›–ç‡çš„ä¸Šå‡ï¼Œé¡¹ç›®ä¼šæ›´åŠ çš„å¥å£®ï¼Œå›¢é˜Ÿçš„ä¿¡å¿ƒæ»¡æ»¡ï¼Œå……æ»¡æ–—å¿—ã€‚æ— è®ºæ˜¯ç€‘å¸ƒå›¢é˜Ÿè¿˜æ˜¯æ•æ·å›¢é˜Ÿï¼Œå•å…ƒæµ‹è¯•åŠè‡ªåŠ¨åŒ–å•å…ƒæµ‹è¯•ä½œä¸ºé‡è¦çš„è´¨é‡ä¿è¯æ‰‹æ®µçš„ä»·å€¼å·²ç»è¢«å¤§å®¶æ¥çº³ä¸è®¤å¯ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¯¹äºå¤§å¤šæ•°å›¢é˜Ÿæ¥è®²å½“æµ‹è¯•è¦†ç›–ç‡æå‡ä¸€å®šé˜¶æ®µåï¼Œæ”¶ç›Šä¼šè¿æ¥ç“¶é¢ˆã€‚</p>
<h2 id=å•å…ƒæµ‹è¯•çš„è®¾è®¡æ„ä¹‰>å•å…ƒæµ‹è¯•çš„è®¾è®¡æ„ä¹‰</h2>
<p>å•å…ƒæµ‹è¯•é™¤äº†ä½œä¸ºè´¨é‡ä¿è¯æ‰‹æ®µä»¥å¤–ï¼Œæ›´åº”è¯¥ä½œä¸ºè®¾è®¡æ‰‹æ®µã€‚TDD çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ï¼Œå°±æ˜¯ä½¿ç”¨å•å…ƒæµ‹è¯•ä½œä¸ºè®¾è®¡æ‰‹æ®µï¼Œä½¿å¼€å‘è€…åœ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œä»¥è°ƒç”¨è€…çš„æ€ç»´æ–¹å¼æ¥å†™ä»£ç ï¼Œè¿™ç§æ–¹å¼çš„æ”¶ç›Šä¼šæ¯”ä½œä¸ºä¿æŠ¤æ‰‹æ®µæ›´é«˜ã€‚
åˆ©ç”¨æµ‹è¯•é©±åŠ¨å¼€å‘å¯ä»¥è®©ä½ çš„è®¾è®¡æ›´åŠ ä¼˜è‰¯ã€ç¼–å†™å‡ºå¯æµ‹è¯•çš„ä»£ç ã€è¿˜èƒ½é¿å…åœ¨ä¸åˆ‡å®é™…çš„å‡è®¾ä¸Šè¿‡åº¦è®¾è®¡ç³»ç»Ÿã€‚</p>
<h2 id=ä¼˜ç§€æµ‹è¯•çš„å…±æ€§>ä¼˜ç§€æµ‹è¯•çš„å…±æ€§</h2>
<ol>
<li>è‰¯å¥½çš„æµ‹è¯•ä»£ç å…·å¤‡å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
<li>æµ‹è¯•ä»£ç åœ¨é¡¹ç›®ä¸­æœ‰ç»“æ„åŒ–çš„ç»„ç»‡æ–¹å¼ã€‚</li>
<li>æµ‹è¯•å…·å¤‡å¯é æ€§å’Œå¯é‡å¤æ€§ã€‚</li>
<li>åˆç†çš„ä½¿ç”¨æµ‹è¯•æ›¿èº«ã€‚</li>
<li>AAA(Arrange, Act & Assert)â€”â€”å‡†å¤‡ã€æ‰§è¡Œã€æ–­è¨€ã€‚ ç¼–å†™æµ‹è¯•ä»£ç æ—¶ï¼Œä½¿ç”¨è¢«ç§°ä¸ºä¸‰Aæ¨¡å‹ï¼šå‡†å¤‡ã€æ‰§è¡Œã€æ–­è¨€ã€‚</li>
</ol>
<h2 id=æµ‹è¯•æ›¿èº«test-double>æµ‹è¯•æ›¿èº«ï¼ˆtest doubleï¼‰</h2>
<p>ä¸ºäº†æ–¹ä¾¿çš„æµ‹è¯•ä»£ç ä»¥åŠç»•å¼€å„ç§ç¯å¢ƒé™åˆ¶ï¼Œåº”è¯¥ä½¿ç”¨æ›¿èº«æ¥ä»£æ›¿çœŸå®å¯¹è±¡ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Car</span> <span style=color:#f92672>{</span>

    <span style=color:#75715e>// å¯¹å¤–å°é—­çš„å¼•æ“å¯¹è±¡ã€‚ä½ æ— æ³•çŸ¥é“å†…åœ¨ä¿¡æ¯ã€‚
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>private</span> Engine engine<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Car</span><span style=color:#f92672>(</span>Engine engine<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>engine</span> <span style=color:#f92672>=</span> engine<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>// éœ€è¦æµ‹è¯•çš„å¯åŠ¨åŠŸèƒ½
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>start</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        engine<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>// éœ€è¦æµ‹è¯•æ±½è½¦çš„é©¾é©¶åŠŸèƒ½
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drive</span><span style=color:#f92672>(</span>Route route<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// æ ¹æ®è·¯çº¿çŠ¶æ€è·å–æä¾›ç»™ car ä½¿ç”¨çš„å„ç§æ–¹å‘ (ååˆ†å¤æ‚çš„ç®—æ³•ï¼Œåˆå§‹åŒ–æ—¶éœ€è¦æ¶‰åŠ gis ç®—æ³•ã€‚æœ€ç»ˆè·å–çš„å¯¹å¯¹è±¡ä¸å½“å‰çš„æ—¶é—´æœ‰å…³ï¼‰
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Directions directions <span style=color:#f92672>:</span> route<span style=color:#f92672>.</span><span style=color:#a6e22e>getDirections</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
            directions<span style=color:#f92672>.</span><span style=color:#a6e22e>follow</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

<span style=color:#f92672>}</span>


</code></pre></div><p>ä¸ºäº†éªŒè¯ä¸€æ®µä»£ç çš„è¡Œä¸ºç¬¦åˆä½ çš„æœŸæœ›ï¼Œæœ€å¥½çš„é€‰æ‹©æ˜¯æ›¿æ¢å…¶å‘¨å›´çš„ä»£ç ï¼Œä½¿ä½ è·å¾—å¯¹ç¯å¢ƒçš„å®Œæ•´æ§åˆ¶ã€‚ä½¿ç”¨äº†æ›¿èº«ï¼Œèƒ½è®©æ‰§è¡Œé€Ÿåº¦å˜å¾—æ›´å¿«ï¼Œå¹¶ä¸”å¯ä»¥éšæ„æ¨¡æ‹Ÿç‰¹æ®Šæƒ…å†µã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestRoute</span> <span style=color:#66d9ef>extends</span> Route <span style=color:#f92672>{</span>
        <span style=color:#75715e>// ä¼ªé€ çš„æ›¿èº«å®ç°äº†å¿«é€Ÿè¿”å›è·¯çº¿ä»¥åŠè¿”å›å›ºå®šè·¯çº¿çš„æ–¹æ³•ï¼Œä½¿æµ‹è¯•å…·å¤‡äº†å¯é ä¸å¯é‡å¤æ€§
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>Directions<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getDirections</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;å¿«é€Ÿçš„è¿”å›å›ºå®šçš„è·¯çº¿&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>Directions<span style=color:#f92672>&gt;();</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestEngine</span> <span style=color:#66d9ef>extends</span> Engine <span style=color:#f92672>{</span>

        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> engineFlg <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>

        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>start</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            engineFlg <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>stop</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>

            engineFlg <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isEngineFlg</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>return</span> engineFlg<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setEngineFlg</span><span style=color:#f92672>(</span><span style=color:#66d9ef>boolean</span> engineFlg<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>engineFlg</span> <span style=color:#f92672>=</span> engineFlg<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>


</code></pre></div><p>ä½¿ç”¨æ›¿èº«æ›¿æ¢åä½œè€…ï¼Œéš”ç¦»è¢«æµ‹ä»£ç æ„å‘³ç€å°†éœ€è¦æµ‹è¯•çš„ä»£ç ä¸å…¶ä»–ä»£ç éš”ç¦»å¼€æ¥ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#a6e22e>@Test</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testCarStart</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        TestEngine engine <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TestEngine<span style=color:#f92672>();</span>
        <span style=color:#66d9ef>new</span> Car<span style=color:#f92672>(</span>engine<span style=color:#f92672>).</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>
        assertTrue<span style=color:#f92672>(</span>engine<span style=color:#f92672>.</span><span style=color:#a6e22e>isEngineFlg</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Test</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testCarDrive</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        TestRoute testRoute <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TestRoute<span style=color:#f92672>();</span>
        TestEngine engine <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TestEngine<span style=color:#f92672>();</span>
        <span style=color:#66d9ef>new</span> Car<span style=color:#f92672>(</span>engine<span style=color:#f92672>).</span><span style=color:#a6e22e>drive</span><span style=color:#f92672>(</span>testRoute<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

</code></pre></div><h3 id=æµ‹è¯•æ›¿èº«çš„ç±»å‹>æµ‹è¯•æ›¿èº«çš„ç±»å‹</h3>
<p>æ›¿èº«æ‹¥æœ‰å¤šç§ç±»å‹ã€‚ä¸åŒçš„æµ‹è¯•åœºæ™¯é€‰æ‹©åˆç†çš„æµ‹è¯•æ›¿èº«æ˜¯ä¼˜ç§€æµ‹è¯•çš„å¿…è¦æ¡ä»¶ä¹‹ä¸€ã€‚æµ‹è¯•æ›¿èº«çš„ç±»å‹ä¹Ÿå†³å®šäº†æµ‹è¯•ç±»çš„å‘½åæ–¹æ³•ï¼Œå°¤å…¶ç‰¹åˆ«æ³¨æ„ã€‚</p>
<h4 id=æ¡©stub>æ¡©ï¼ˆstubï¼‰</h4>
<p>ç”¨æœ€ç®€å•çš„å¯èƒ½å®ç°æ¥ä»£æ›¿çœŸå®å®ç°ã€‚æ¡©æ€»æ˜¯çŸ­å°çš„ã€‚æœ€å¥½çš„ä¾‹å­å°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•éƒ½åªæœ‰ä¸€è¡Œï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<pre><code>public class LoggerStub implements Logger {

    @Override
    public void log() {
        // Nope
    }
}

</code></pre><h4 id=ä¼ªé€ å¯¹è±¡-fake>ä¼ªé€ å¯¹è±¡ ï¼ˆfakeï¼‰</h4>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦å¡«å……ä¸€äº›è¡Œä¸ºï¼Œè€Œæœ‰æ—¶å€™ä½ éœ€è¦æµ‹è¯•æ›¿èº«æ ¹æ®æ”¶åˆ°çš„æ¶ˆæ¯ç§ç±»æ¥è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºã€‚
Fake å°±åƒæ˜¯çœŸå®äº‹ç‰©çš„ç®€å•ç‰ˆæœ¬ï¼Œä»–èƒ½å¤Ÿä¼ªé€ çœŸå®äº‹ç‰©çš„è¡Œä¸ºï¼Œå…·å¤‡ç®€å•çš„ä¸šåŠ¡é€»è¾‘ï¼ŒåŒæ—¶æ²¡æœ‰å‰¯ä½œç”¨æˆ–è€…ä½¿ç”¨çœŸå®äº‹ç‰©çš„å…¶ä»–åæœã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestRoute</span> <span style=color:#66d9ef>extends</span> Route <span style=color:#f92672>{</span>
        <span style=color:#75715e>// ä¼ªé€ çš„æ›¿èº«å®ç°äº†å¿«é€Ÿè¿”å›è·¯çº¿ä»¥åŠè¿”å›å›ºå®šè·¯çº¿çš„æ–¹æ³•ï¼Œä½¿æµ‹è¯•å…·å¤‡äº†å¯é ä¸å¯é‡å¤æ€§
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>Directions<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getDirections</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;å¿«é€Ÿçš„è¿”å›å›ºå®šçš„è·¯çº¿&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>Directions<span style=color:#f92672>&gt;();</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

</code></pre></div><p>ä¼ªé€ å¯¹è±¡ä¸æµ‹è¯•æ¡©ååˆ†å¸¸ç”¨ï¼Œä½ å¯ä»¥åœ¨æµ‹è¯•æ—¶ç”¨å®ƒä»¬æ›¿æ¢æ‰ç¼“æ…¢çš„çœŸå®äº‹ç‰©ï¼Œä»¥åŠé­é•¿è«åŠçš„ä¾èµ–ã€‚</p>
<h4 id=æµ‹è¯•é—´è°-spy>æµ‹è¯•é—´è° (spy)</h4>
<p>æµ‹è¯•é—´è°ç”¨äºè®°å½•ä½ å’ŒæŸä¸ªä¸å¯¹ä½ å¼€æ”¾çš„å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚å½“å¯¹è±¡ä¸åä½œè€…ä¹‹é—´äº¤äº’æ—¶ï¼Œæ— æ³•è·å–åä½œè€…äº¤äº’ç»“æœçš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨æµ‹è¯•é—´è°ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// æµ‹è¯•é—´è°
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestEngine</span> <span style=color:#66d9ef>extends</span> Engine <span style=color:#f92672>{</span>
        <span style=color:#75715e>// å¯¹å¤–æš´éœ²ä¿¡æ¯
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> engineFlg <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>

        <span style=color:#75715e>// æ¯”çœŸå®å¯¹è±¡çš„ start æ–¹æ³•æ›´å…·æœ‰äº¤äº’æ€§çš„æ–¹æ³•ã€‚
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>start</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            engineFlg <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>stop</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>

            engineFlg <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
        <span style=color:#75715e>// å¯¹å¤–æä¾›ç”¨äºè·å–äº¤äº’ç»“æœçš„æ¥å£ï¼Œç”¨äºæ–­è¨€ã€‚
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isEngineFlg</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>return</span> engineFlg<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setEngineFlg</span><span style=color:#f92672>(</span><span style=color:#66d9ef>boolean</span> engineFlg<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>engineFlg</span> <span style=color:#f92672>=</span> engineFlg<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

</code></pre></div><h4 id=æ¨¡æ‹Ÿå¯¹è±¡-mock>æ¨¡æ‹Ÿå¯¹è±¡ mock</h4>
<p>æ¨¡æ‹Ÿå¯¹è±¡æ˜¯åœ¨ä¸€ä¸ªç‰¹å®šæƒ…å¢ƒä¸‹å¯é…ç½®è¡Œä¸ºçš„å¯¹è±¡ã€‚æ¨¡æ‹Ÿå¯¹è±¡æ—¶ä¸€ç§æ›´åŠ é«˜çº§ä¸ç‰¹æ®Šçš„æµ‹è¯•é—´è°ï¼Œå®ƒå…³æ³¨çš„é‡ç‚¹æ˜¯ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„äº¤äº’è¡Œä¸ºã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>mockTest</span><span style=color:#f92672>(){</span>
    <span style=color:#66d9ef>final</span> Internet internet <span style=color:#f92672>=</span> context<span style=color:#f92672>.</span><span style=color:#a6e22e>mock</span><span style=color:#f92672>(</span>Internet<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
    context<span style=color:#f92672>.</span><span style=color:#a6e22e>checking</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Expectations<span style=color:#f92672>()</span> <span style=color:#f92672>{{</span>
        one<span style=color:#f92672>(</span>internet<span style=color:#f92672>).</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>with<span style=color:#f92672>(</span>containsString<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;langpair=en&#34;</span><span style=color:#f92672>)));</span>
        will<span style=color:#f92672>(</span>returnValue<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ok&#34;</span><span style=color:#f92672>))</span>
    <span style=color:#f92672>}};</span>
    Translator t <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Translator<span style=color:#f92672>(</span>internet<span style=color:#f92672>);</span>
    String translation <span style=color:#f92672>=</span> t<span style=color:#f92672>.</span><span style=color:#a6e22e>translate</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;flower&#34;</span><span style=color:#f92672>,</span>ENGLISH<span style=color:#f92672>);</span>
    assertEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ok&#34;</span><span style=color:#f92672>,</span>translation<span style=color:#f92672>)</span>

<span style=color:#f92672>}</span>

</code></pre></div><p>é€šè¿‡ä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡çš„é¢„æµ‹è¿”å›å€¼è¡Œä¸ºï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ ç²¾ç¡®çš„å¯¹äº¤äº’è¡Œä¸ºè¿›è¡ŒéªŒè¯ã€‚</p>
<h2 id=å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ›¿èº«ç±»å‹>å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ›¿èº«ç±»å‹</h2>
<ul>
<li>å¦‚æœä½ æµ‹è¯•çš„é‡ç‚¹æ˜¯äº¤äº’ï¼Œå³ä¸¤ä¸ªå¯¹è±¡ä¹‹å‰çš„è°ƒç”¨ï¼Œä½ å¯èƒ½éœ€è¦ä¸€ä¸ªæ¨¡æ‹Ÿå¯¹è±¡ mockã€‚</li>
<li>å¦‚æœä½ å†³å®šä½¿ç”¨ Mock ï¼Œä½†æµ‹è¯•ä»£ç æœ€ç»ˆçœ‹èµ·æ¥ä¸åƒä½ æƒ³è±¡çš„é‚£ä¹ˆæ¼‚äº®äº†ï¼Œåˆ™è€ƒè™‘ä½¿ç”¨ Spyã€‚</li>
<li>å¦‚æœä½ åªå…³å¿ƒåä½œå¯¹è±¡å‘è¢«æµ‹å¯¹è±¡è¾“é€çš„å“åº”ï¼Œç”¨ stub è§£å†³é—®é¢˜ã€‚</li>
<li>å¦‚æœä½ è¿è¡Œçš„æ˜¯ä¸€ä¸ªå¤æ‚åœºæ™¯ï¼Œå…¶ä¸­å®ƒæ‰€ä¾èµ–çš„æœåŠ¡æ— æ³•ä¾›æµ‹è¯•ä½¿ç”¨ï¼Œä½†æ˜¯ä½ åˆéœ€è¦è¿™äº›æœåŠ¡æä¾›çš„è¡Œä¸ºå“ªæ€•æ˜¯ä¸€ä¸ªç®€å•çš„æç¤ºï¼Œé‚£å°±åº”è¯¥è€ƒè™‘ä½¿ç”¨ Fakeã€‚</li>
</ul>
<hr>
<p>ã€Šæœ‰æ•ˆçš„å•å…ƒæµ‹è¯•ã€‹ <em>Lasse Koskela</em></p>
</section>
<footer>
<a class="permalink u-url" href=https://www.chucklin.net/post/goodtest/>ğŸ”—</a>
<hr class=post-underline>
<p class=post-tag>Tags for this post:
<a href=https://www.chucklin.net/tags/java class="post-tag p-category">java</a>
</p>
</footer>
</article>
</div>
<div class=h-card>
<img class=u-photo src=https://www.chucklin.net/images/avator.jpg>
<div class=card-content>
<h2 class=card-name><a class="p-name u-url" href=https://www.chucklin.net/ rel=me>Chuck Lin</a></h2>
<p class=card-subhead>
<span class=p-locality>Chengdu</span>,
<span class=p-country-name>China</span><br>
<a class=u-email href=mailto:mikumiku.lch@hotmail.com>Email me</a>
</p>
</div>
<p class=p-note>ä»äº‹å¼€å‘å·¥ä½œ10å¹´ï¼ŒæŒç»­å†™ä½œ4å¹´ï¼Œç°åœ¨çš„èº«ä»½æ˜¯ä¸€å freelancerã€‚é¡¹ç›®å¤–åŒ…ã€é›‡ä½£æ´½è°ˆç­‰äº‹é¡¹è¯·é€šè¿‡é‚®ç®±å’Œæˆ‘è”ç³»ã€‚</p>
</div>
<div id=footer>
<nav id=article-skip>
<div class=next>
<a alt="Newer article" href=https://www.chucklin.net/post/sql_inject/>&larr; Newer</a>
</div>
<div class=top>
<a alt="Top of page" href=#>Top</a>
</div>
<div class=prev>
<a alt="Older article" href=https://www.chucklin.net/post/testphilosophy/>Older &rarr;</a>
</div>
</nav>
<aside id=social>
<div id=social-icons>
<div class=icon-24x24>
<a class=glyph alt="GitHub profile" href=https://github.com/chuck1in><img src=https://www.chucklin.net/icons/github.svg height=24px width=24px></a>
</div>
</div>
</aside>
<p class=copyright>
Copyright Â© 2021 Chuck Lin. All rights reserved.
</p>
</div>
</body>
</html>