<!doctype html><html lang=zh-cn><head><meta charset=utf-8><title>å‘½ä»¤è®¾è®¡æ¨¡å¼ | ChuckLin's Blog</title><meta name=description content="Love and Peace"><meta name=author content><link rel=apple-touch-icon sizes=180x180 href=https://example.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://example.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://example.com/favicon-16x16.png><link rel=manifest href=https://example.com/site.webmanifest><link rel=mask-icon href=https://example.com/safari-pinned-tab.svg color=#00416a><meta name=msapplication-TileColor content="#00aba9"><meta name=theme-color content="#ffffff"><link rel=me href=mailto:mikumiku.lch@hotmail.com><link rel=me href=https://github.com/chuck1in><link rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token><link rel=stylesheet href=https://example.com/css/fonts.css><link rel=stylesheet href=https://example.com/css/style.css><meta name=viewport content="width=device-width,initial-scale=1"></head><body><div id=sitelogo><a class=glyph alt=Home href=https://example.com/><img src=https://example.com/images/site-logo.svg alt="Site Logo" height=64px width=64px></a></div><header><nav><div id=page-nav><div class=page-nav-item><a href=https://example.com/>Home</a></div><div class=page-nav-item><a href=/about/me><span>About</span></a></div><div class=page-nav-item><a href=/tags><span>Tag</span></a></div></div></nav></header><div id=content><article class=h-entry><header><h1 class="post-title p-name">å‘½ä»¤è®¾è®¡æ¨¡å¼</h1><p class=post-date>Posted on
<time class=dt-published datetime=2018-01-19T09:23:00+08:00>19 January, 2018 at 09:23 +0800</time> by <a href=https://example.com/ class="p-author h-card" rel=author>Chuck Lin</a></p></header><section class="content e-content"><h2 id=ä»€ä¹ˆæ˜¯å‘½ä»¤è®¾è®¡æ¨¡å¼>ä»€ä¹ˆæ˜¯å‘½ä»¤è®¾è®¡æ¨¡å¼</h2><p>é€šè¿‡å°†â€œè¯·æ±‚â€å°è£…æˆå‘½ä»¤å¯¹è±¡ï¼Œæ¥å°†æ“ä½œçš„è¯·æ±‚è€…ä¸æ“ä½œçš„æ‰§è¡Œè€…è§£è€¦ï¼Œä»¥ä¾¿ä½¿ç”¨ä¸åŒçš„è¯·æ±‚é˜Ÿåˆ—æˆ–è€…æ—¥å¿—æ¥å‚æ•°åŒ–å…¶ä»–å¯¹è±¡ï¼Œå‘½ä»¤æ¨¡å¼ä¹Ÿæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚</p><h2 id=ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å‘½ä»¤è®¾è®¡æ¨¡å¼>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å‘½ä»¤è®¾è®¡æ¨¡å¼</h2><p>è¯•æƒ³ä¸‹é¢ä¸€ç§ä¸šåŠ¡åœºæ™¯ã€‚
ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªä¸­é—´ä»¶ï¼Œåç§°ä¸º cacheã€‚è¿™ä¸ª cache æ‰¿æ‹…äº†å¼‚æ­¥å‘ç”¨æˆ·å¤–å‘é€é‚®ä»¶ä¸çŸ­ä¿¡çš„åŠŸèƒ½ã€‚
ç³»ç»Ÿä¸­å·²ç»æœ‰è®¾è®¡å¥½çš„ç‹¬ç«‹çš„é‚®ä»¶ä¸çŸ­ä¿¡å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š
<img src=http://static.zybuluo.com/mikumikulch/y9nrghiqrr04y4wrnvkog542/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-12-27%20%E4%B8%8B%E5%8D%882.33.36.png alt="å±å¹•å¿«ç…§ 2016-12-27 ä¸‹åˆ2.33.36.png-16.4kB">
å‘é€ä¸€å°é‚®ä»¶è¦æ¯”å‘é€çŸ­ä¿¡å¤æ‚çš„å¤šã€‚æ‰€ä»¥ï¼ŒMAIL å¯¹è±¡ç›¸å¯¹äº SMS å¯¹è±¡è¦å¤æ‚ä¸å°‘ã€‚é™¤äº† title ä¸ body ä»¥å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®é‚®ä»¶çš„é™„ä»¶ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹è®¾è®¡ä¸­é—´ä»¶çš„å…·ä½“é€»è¾‘ã€‚æˆ‘çš„æ€è·¯å¾ˆæ¸…æ™°ï¼šé¦–å…ˆè®¾è®¡ä¸€ä¸ªä¸­é—´ä»¶ã€‚ä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿçš„ä»å®¹å™¨ä¸­è·å–å’Œæ·»åŠ å¯¹è±¡ï¼Œæˆ‘ä»¬é‡‡ç”¨ LinkedList å¯¹è±¡ã€‚
ç„¶åå°†å‘é‚®ä»¶ä¸å‘çŸ­ä¿¡çš„ä»»åŠ¡é€ä¸ªæ·»åŠ è¿› cache ä¸­ï¼Œæœ€åå¾ªç¯ cacheï¼Œåšå‡ºç›¸åº”å¤„ç†ã€‚</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>/**
</span><span style=color:#75715e> * å‘é€é‚®ä»¶
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MAIL</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMailTitle</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;è®¾ç½®é‚®ä»¶æ ‡é¢˜&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMailBody</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;è®¾ç½®é‚®ä»¶å†…å®¹&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMailAttachment</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;è®¾ç½®é‚®ä»¶é™„ä»¶&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>sendMail</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;å‘é€é‚®ä»¶&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#75715e>/**
</span><span style=color:#75715e> *
</span><span style=color:#75715e> *
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SMS</span> <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMsg</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;è®¾ç½®çŸ­ä¿¡å†…å®¹&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>sendSms</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;å‘é€çŸ­ä¿¡&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>


<span style=color:#f92672>import</span> java.util.LinkedList<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.List<span style=color:#f92672>;</span>

<span style=color:#75715e>/**
</span><span style=color:#75715e> * å‘½ä»¤è®¾è®¡æ¨¡å¼
</span><span style=color:#75715e> * ä¸­é—´ä»¶ä»»åŠ¡æ‰§è¡Œå™¨
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JobExecuter</span> <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>Object<span style=color:#f92672>&gt;</span> caches <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedList<span style=color:#f92672>&lt;&gt;();</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * æ‰§è¡Œä¸­é—´ä»¶ä»»åŠ¡
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>executeJobs</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Object cache <span style=color:#f92672>:</span> caches<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>cache <span style=color:#66d9ef>instanceof</span> MAIL<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                <span style=color:#f92672>((</span>MAIL<span style=color:#f92672>)</span> cache<span style=color:#f92672>).</span><span style=color:#a6e22e>setMailTitle</span><span style=color:#f92672>();</span>
                <span style=color:#f92672>((</span>MAIL<span style=color:#f92672>)</span> cache<span style=color:#f92672>).</span><span style=color:#a6e22e>setMailBody</span><span style=color:#f92672>();</span>
                <span style=color:#f92672>((</span>MAIL<span style=color:#f92672>)</span> cache<span style=color:#f92672>).</span><span style=color:#a6e22e>setMailAttachment</span><span style=color:#f92672>();</span>
                <span style=color:#f92672>((</span>MAIL<span style=color:#f92672>)</span> cache<span style=color:#f92672>).</span><span style=color:#a6e22e>sendMail</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>cache <span style=color:#66d9ef>instanceof</span> SMS<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                <span style=color:#f92672>((</span>SMS<span style=color:#f92672>)</span> cache<span style=color:#f92672>).</span><span style=color:#a6e22e>setMsg</span><span style=color:#f92672>();</span>
                <span style=color:#f92672>((</span>SMS<span style=color:#f92672>)</span> cache<span style=color:#f92672>).</span><span style=color:#a6e22e>sendSms</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>


    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        caches<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> MAIL<span style=color:#f92672>());</span>
        caches<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> SMS<span style=color:#f92672>());</span>
        executeJobs<span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>ä¸ºäº†ç®€æ˜æ‰¼è¦çš„è¯´æ˜è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬çœç•¥äº†å„ç§çº¿ç¨‹ä»»åŠ¡çš„åˆ›å»ºæ‰§è¡Œä»£ç ã€‚
ä»»åŠ¡å·²ç»é¡ºåˆ©å®Œæˆäº†ï¼Œä¸­é—´ä»¶èƒ½å¤Ÿæ ¹æ®ä»»åŠ¡ç±»å‹è‡ªåŠ¨åˆ¤æ–­ä¸åŒçš„ä¸šåŠ¡ï¼Œå¹¶é¡ºåˆ©å®Œæˆéœ€æ±‚ã€‚</p><p>é—æ†¾çš„æ˜¯ï¼Œè¿™æ ·çš„è®¾è®¡æ‹¥æœ‰ä¸€äº›â€œé‡å¤§ç¼ºé™·â€ã€‚</p><blockquote><ol><li>è¯·æ±‚ä¸æ‰§è¡Œçš„è€¦åˆåº¦å¾ˆé«˜ã€‚å‡è®¾éœ€è¦å†å¢åŠ ä¸€ä¸ªæ¨é€ app æ¶ˆæ¯çš„ä¸šåŠ¡ï¼Œé‚£ä¹ˆä½ çš„ä»£ç å¾ˆå¿«å°±ä¼šé™·å…¥ if else çš„æµ·æ´‹ã€‚</li><li>ç±»æ²¡æœ‰å¯¹æ‰©å±•å¼€å‘ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å½“éœ€æ±‚å˜åŒ–æ—¶æˆ‘ä»¬ä»…ä»…èƒ½å¤Ÿé€šè¿‡ä¿®æ”¹ä»£ç æ¥åº”å¯¹ã€‚</li><li>executeJobs() æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾èµ–å…·ä½“å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¥å£æˆ–æŠ½è±¡çš„å¤±è´¥æ¡ˆä¾‹ã€‚</li><li>å¦‚æœæˆ‘ä»¬æƒ³è¦å°†å‘é€ç»™æŸ 1 ä¸ªç”¨æˆ·çš„æ¶ˆæ¯ä¸€èµ·æ‰§è¡Œï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ</li></ol></blockquote><p>å¥½æ¶ˆæ¯æ˜¯ï¼Œå‘½ä»¤è®¾è®¡æ¨¡å¼èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è§£å†³ä¸Šé¢çš„æ‰€æœ‰é—®é¢˜ã€‚
åœ¨å­¦ä¹ å‘½ä»¤è®¾è®¡æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¯•ç€ç”¨é¤å…å°±é¤è¿™ä¸ªæ—¥å¸¸ç”Ÿæ´»ä¸­çš„è¡Œä¸ºï¼Œæ¥æ¥è¿‘å‘½ä»¤è®¾è®¡æ¨¡å¼ã€‚
å½“æˆ‘ä»¬åœ¨é¤å…å°±é¤æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå…ˆå‘æœåŠ¡å‘˜ç‚¹é¤ï¼Œç„¶åé€šè¿‡æœåŠ¡å‘˜æŠŠç‚¹å¥½çš„é¤ç‚¹é€å¾€åå¨ï¼Œå¹¶é€šçŸ¥åå¨æ ¹æ®æ–°è®¢å•å‡†å¤‡é¤ç‚¹ã€‚</p><pre><code class=language-flow data-lang=flow>client=&gt;start: å®¢æˆ·
waiter=&gt;operation: æœåŠ¡å‘˜
createOrders=&gt;operation: ç‚¹é¤ï¼ˆcreateOrdersï¼‰
notifyChef=&gt;operation: é€šçŸ¥åå¨
chef=&gt;end: å‡†å¤‡é¤ç‚¹

client-&gt;createOrders-&gt;waiter-&gt;notifyChef-&gt;chef
</code></pre><p>é€šè¿‡ç‚¹é¤åˆ›å»ºçš„è®¢å•ï¼Œå±è”½äº†ä¸åŒçš„å®¢æˆ·çš„ä¸åŒéœ€æ±‚ã€‚å¯¹äº waiter æ¥è¯´ï¼Œä¸éœ€è¦çŸ¥é“è®¢å•çš„å…·ä½“å†…å®¹ã€‚åªéœ€è¦å°†å®¢æˆ·çš„ç‚¹é¤è®¢å•ä¼ é€’ç»™åå¨ï¼Œå¹¶é€šçŸ¥åå¨ä»»åŠ¡å°±ç®—å®Œæˆäº†ã€‚åå¨é€šè¿‡è®¢å•å†…å®¹ï¼Œç€æ‰‹å‡†å¤‡å·¥ä½œã€‚</p><h4 id=ä»é¤å…åˆ°å‘½ä»¤è®¾è®¡æ¨¡å¼>ä»é¤å…åˆ°å‘½ä»¤è®¾è®¡æ¨¡å¼</h4><p>å°†é¤å…æƒ³è±¡æˆ OO è®¾è®¡æ¨¡å¼çš„ä¸€ç§æ¨¡å‹ã€‚å®¢æˆ·å°±ç›¸å½“äº clientã€ç‚¹é¤çš„åŠ¨ä½œå°±ç›¸å½“äºåˆ›å»ºè¯·æ±‚ã€æœåŠ¡å‘˜å°±ç›¸å½“äºå¼‚æ­¥ä¸­é—´ä»¶ã€åå¨åˆ™æ˜¯çœŸæ­£ action çš„æ‰§è¡Œè€…ã€‚
å¥½äº†ï¼Œè®©æˆ‘ä»¬æ ¹æ®è¿™æ ·çš„æ€è·¯é‡æ–°è®¾è®¡ä¹‹å‰çš„éœ€æ±‚ã€‚
<img src=http://static.zybuluo.com/mikumikulch/hgbkpn28eidao2l9kwh3bl89/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-12-27%20%E4%B8%8B%E5%8D%884.37.55.png alt="å±å¹•å¿«ç…§ 2016-12-27 ä¸‹åˆ4.37.55.png-44.8kB"></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>
<span style=color:#75715e>/**
</span><span style=color:#75715e> * å‘½ä»¤è®¾è®¡æ¨¡å¼
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Command</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>execute</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>


<span style=color:#75715e>/**
</span><span style=color:#75715e> * å‘é€é‚®ä»¶
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MAIL</span> <span style=color:#66d9ef>implements</span> Command <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMailTitle</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;è®¾ç½®é‚®ä»¶æ ‡é¢˜&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMailBody</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;è®¾ç½®é‚®ä»¶å†…å®¹&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMailAttachment</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;è®¾ç½®é‚®ä»¶é™„ä»¶&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>sendMail</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;å‘é€é‚®ä»¶&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>execute</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        setMailAttachment<span style=color:#f92672>();</span>
        setMailBody<span style=color:#f92672>();</span>
        setMailTitle<span style=color:#f92672>();</span>
        sendMail<span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>


<span style=color:#75715e>/**
</span><span style=color:#75715e> * å‘½ä»¤è®¾è®¡æ¨¡å¼
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SMS</span> <span style=color:#66d9ef>implements</span> Command <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setMsg</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;è®¾ç½®çŸ­ä¿¡å†…å®¹&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>sendSms</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;å‘é€çŸ­ä¿¡&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>execute</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        setMsg<span style=color:#f92672>();</span>
        sendSms<span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>


<span style=color:#f92672>import</span> java.util.LinkedList<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.List<span style=color:#f92672>;</span>

<span style=color:#75715e>/**
</span><span style=color:#75715e> * å‘½ä»¤è®¾è®¡æ¨¡å¼
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CommandInvoker</span> <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>Command<span style=color:#f92672>&gt;</span> caches <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedList<span style=color:#f92672>&lt;&gt;();</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * è®¾ç½®Invokeræ‰€éœ€è¦çš„å‘½ä»¤
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @param e
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>addCommand</span><span style=color:#f92672>(</span>Command e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        caches<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * æ‰§è¡Œä¸­é—´ä»¶ä»»åŠ¡
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>executeJobs</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Command cache <span style=color:#f92672>:</span> caches<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            cache<span style=color:#f92672>.</span><span style=color:#a6e22e>execute</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

<span style=color:#f92672>}</span>


<span style=color:#75715e>/**
</span><span style=color:#75715e> * å‘½ä»¤å®¢æˆ·ç«¯
</span><span style=color:#75715e> */</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CommandClient</span> <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        CommandInvoker commandInvoker <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> CommandInvoker<span style=color:#f92672>();</span>
        Command commandMail <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MAIL<span style=color:#f92672>();</span>
        Command commandSms <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SMS<span style=color:#f92672>();</span>
        commandInvoker<span style=color:#f92672>.</span><span style=color:#a6e22e>addCommand</span><span style=color:#f92672>(</span>commandMail<span style=color:#f92672>);</span>
        commandInvoker<span style=color:#f92672>.</span><span style=color:#a6e22e>addCommand</span><span style=color:#f92672>(</span>commandSms<span style=color:#f92672>);</span>
        <span style=color:#75715e>//TODO add command in futrue on pg run
</span><span style=color:#75715e></span>
        commandInvoker<span style=color:#f92672>.</span><span style=color:#a6e22e>executeJobs</span><span style=color:#f92672>();</span>

    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>è®¾ç½®é‚®ä»¶é™„ä»¶
è®¾ç½®é‚®ä»¶å†…å®¹
è®¾ç½®é‚®ä»¶æ ‡é¢˜
å‘é€é‚®ä»¶
è®¾ç½®çŸ­ä¿¡å†…å®¹
å‘é€çŸ­ä¿¡
</code></pre></div><h4 id=é—®é¢˜å›é¡¾>é—®é¢˜å›é¡¾</h4><p>æ€»ç®—å®Œæˆäº†ã€‚æœ€åå†å›é¡¾ä¸€ä¸‹ä¹‹å‰å‡ºç°çš„é‡å¤§é—®é¢˜ï¼Œçœ‹çœ‹æ˜¯å¦è¿™äº›é—®é¢˜éƒ½é€šè¿‡å‘½ä»¤è®¾è®¡æ¨¡å¼éƒ½å¾—åˆ°äº†è§£å†³</p><blockquote><p>è¯·æ±‚ä¸æ‰§è¡Œçš„è€¦åˆåº¦å¾ˆé«˜ã€‚å‡è®¾éœ€è¦å†å¢åŠ ä¸€ä¸ªæ¨é€ app
æ¶ˆæ¯çš„ä¸šåŠ¡ï¼Œé‚£ä¹ˆä½ çš„ä»£ç å¾ˆå¿«å°±ä¼šé™·å…¥ if else çš„æµ·æ´‹ã€‚</p></blockquote><p>é€šè¿‡å°†è¯·æ±‚å°è£…ä¸ºå‘½ä»¤ï¼Œè§£è€¦äº†è¯·æ±‚è€…ä¸æ‰§è¡Œè€…ã€‚å½“æœ‰æ–°éœ€æ±‚æ—¶ï¼Œæ–°çš„è¯·æ±‚åªéœ€è¦å®ç°å‘½ä»¤æ¥å£ï¼Œå°±èƒ½è¢«æˆ‘ä»¬çš„ä»£ç æ‰€å¤ç”¨ã€‚</p><blockquote><p>ç±»æ²¡æœ‰å¯¹æ‰©å±•å¼€å‘ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å½“éœ€æ±‚å˜åŒ–æ—¶æˆ‘ä»¬ä»…ä»…èƒ½å¤Ÿé€šè¿‡ä¿®æ”¹ä»£ç æ¥åº”å¯¹ã€‚</p></blockquote><p>éœ€æ±‚æœ‰å˜åŒ–æ—¶ï¼Œé€šè¿‡ setCommand() / addCommand() æ–¹æ³•å®ç°äº†å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p><blockquote><ol start=3><li>executeJobs() æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾èµ–å…·ä½“å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¥å£æˆ–æŠ½è±¡çš„å¤±è´¥æ¡ˆä¾‹ã€‚</li></ol></blockquote><p>ç°åœ¨ä¾èµ–çš„æ˜¯ Command æ¥å£å¯¹è±¡ã€‚</p><blockquote><p>å¦‚æœæˆ‘ä»¬æƒ³è¦å°†å‘é€ç»™æŸ 1 ä¸ªç”¨æˆ·çš„æ¶ˆæ¯ä¸€èµ·æ‰§è¡Œï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ</p></blockquote><p>å°†æ‰€éœ€è¦çš„ä»»åŠ¡ç»„åˆæˆä¸ºä¸€ä¸ªæ–°çš„ commandMacro å®å¯¹è±¡ã€‚å®å¯¹è±¡æŒæœ‰ä¸€ä¸ª command å¯¹è±¡çš„æ•°ç»„ã€‚å¹¶åœ¨ execute ä¸­è°ƒç”¨æ•°ç»„ä¸­æ‰€æœ‰å¯¹è±¡çš„ execute æ–¹æ³•ï¼Œå°±èƒ½å®ç°è¿™æ ·çš„éœ€æ±‚ã€‚</p><h2 id=æ€»ç»“>æ€»ç»“</h2><p>å‘½ä»¤è®¾è®¡æ¨¡å¼é€šè¿‡ä¸€ä¸ªä¸­é—´äºº/ä»¶å°†è¯·æ±‚å°è£…ä¸ºç»Ÿä¸€çš„å‘½ä»¤ï¼Œè¾¾åˆ°äº†ä¸å‘½ä»¤çš„æ‰§è¡Œè€…ä¹‹é—´å®ç°è§£è€¦çš„ç›®çš„ã€‚è¿™æ ·çš„è®¾è®¡ä½¿å¾—ä¸­é—´äººçš„ä»£ç å°½å¯èƒ½çš„ç®€å•ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¸ä»»æ„çš„å¯¹è±¡ç»„åˆã€‚å®Œæ•´çš„å‘½ä»¤è®¾è®¡æ¨¡å¼è¿˜æ‹¥æœ‰ undoï¼Œæ’¤é”€ä¸Šä¸€æ¬¡å‘½ä»¤çš„åŠŸèƒ½ã€‚
ä½ å¯ä»¥è¯•ç€è‡ªå·±æ¥å®ç°è¿™ä¸ªåŠŸèƒ½æ¥åŠ æ·±å¯¹å‘½ä»¤è®¾è®¡æ¨¡å¼çš„ç†è§£ã€‚</p></section><footer><a class="permalink u-url" href=https://example.com/post/command_designmode/>ğŸ”—</a><hr class=post-underline><p class=post-tag>Tags for this post:
<a href=https://example.com/tags/java class="post-tag p-category">java</a></p></footer></article></div><div class=h-card><img class=u-photo src=https://example.com/images/site-logo.svg><div class=card-content><h2 class=card-name><a class="p-name u-url" href=https://example.com/ rel=me>Chuck Lin</a></h2><p class=card-subhead><span class=p-locality>Chengdu</span>,
<span class=p-country-name>China</span><br><a class=u-email href=mailto:mikumiku.lch@hotmail.com>Email me</a></p></div><p class=p-note>Love and Peace</p></div><div id=footer><nav id=article-skip><div class=next><a alt="Newer article" href=https://example.com/post/sign_designmode/>&larr; Newer</a></div><div class=top><a alt="Top of page" href=#>Top</a></div><div class=prev><a alt="Older article" href=https://example.com/post/builder_designmode/>Older &rarr;</a></div></nav><aside id=social><div id=social-icons><div class=icon-24x24><a class=glyph alt="GitHub profile" href=https://github.com/chuck1in><img src=https://example.com/icons/github.svg height=24px width=24px></a></div></div></aside><p class=copyright>Copyright Â© 2021 Chuck Lin. All rights reserved.</p></div></body></html>